<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Clue-less</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Includes -->
    <script type="text/javascript" src="/phaser-2.4.3/build/phaser.min.js"></script>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="js/Boot.js"></script>
    <script type="text/javascript" src="js/Preload.js"></script>
    <script type="text/javascript" src="js/Game.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="js/main.js"></script>
    
</head>
<script src="/socket.io/socket.io.js"></script>

<body>
<img src="css/images/banner.png" style="    display: block;
    margin: 0 auto;">
<div style="position:relative;    margin: auto;
top: 0px;
    width: 1045px;
    background-color: rgba(0, 0, 0, 0.8);
    border: 3px solid #454545;
    padding: 10px;">

<!--Drop down menu to select Character-->
<div class= "player-game-options" style="padding:5px;">
<div class="notepad" style="width:150px; padding:5px; display:inline-block">
    <b>Select Character</b> </br>
    <select name = "characters" id = "myCharacter"></select><br>
    <button type = "button" id ="join">Join Game!</button>
</div>
</div>


<div style="padding:5px;">
<div class="notepad" style="width:150px; padding:5px; display:inline-block">
     <button type = "input" id = "startGame" >Start Game!</button><br><br>
      <button type = "input" id = "restartGame" >Restart Game!</button>
</div></div>
<img src ="/public/Board.png" style = "display:inline-block; ">
<!--The notepad for keep deducting an accusation-->
<div class="player-game-options">
<div class = "notepad" style="width:150px;display:inline-block;">
	<b>Detective Notes</b><br><br>
    <b>Suspects</b> </br>
    <input type = "checkbox" /> Col. Mustard </br>
    <input type = "checkbox" /> Professor Plub </br>
    <input type = "checkbox" /> Mr. Green </br>
    <input type = "checkbox" /> Mrs. Peakcock </br>
    <input type = "checkbox" /> Miss Scarlet </br>
    <input type = "checkbox" /> Mrs. White </br>
    <br><b>Weapons</b></br>
    <input type = "checkbox" /> Knife </br>
    <input type = "checkbox" /> Candlestick </br>
    <input type = "checkbox" /> Revolver </br>
    <input type = "checkbox" /> Rope </br>
    <input type = "checkbox" /> Lead Pipe </br>
    <input type = "checkbox" /> Wrench </br>
  <br> <b> Room</b></br>
    <input type = "checkbox" /> Bloomberg Center </br>
    <input type = "checkbox" /> Peabody Library </br>
    <input type = "checkbox" /> Bon Appetit </br>
    <input type = "checkbox" /> Malone Hall </br>
    <input type = "checkbox" /> Homewood Field </br>
    <input type = "checkbox" /> Gilman Hall </br>
    <input type = "checkbox" /> Hopkins Club </br>
    <input type = "checkbox" /> Keyser Quad </br>
    <input type = "checkbox" /> Residence Hall </br>
</div>
</div>


<!-- Right side panel-->

<div class ="notepad" style="width:150px; padding:5px; position:absolute; left: 875px; top: 5px;">
    <!--TODO: append hand of cards to this list-->

    <div>
        <ul id = "cards"></ul>
    </div>
    <!--Dynamically create update tables here status' to maintain a tally before utilizing a GUI-->
    <div id = "weaponTable"></div>
    <div id = "characterTable"></div>
    Your Current Hand </br>
    <select name = "myHand" id = "myHand"></select>
    <button type = "input" id ="disproveButton">Disprove!</button>
    <form>
        <!-- Drop down menus for moving and making accusations-->
        <label for ="location">Move to:</label>
        <select name = "location" id = "location"></select>
        <button type = "button" id="moveButton" disabled = "disabled">Move!</button>
        </br>
        <span style="display:inline-block">
        <label for ="suspects">Characters</label>
    <select name = "suspects" id = "suspects">
        <option value="1">Col. Mustard</option>
        <option value="2">Professor Plum</option>
        <option value="3">Mr. Green</option>
        <option value="4">Mrs. Peacock</option>
        <option value="5">Miss Scarlet</option>
        <option value="6">Mrs. White</option>
    </select>
            </span>
        <span style="display:inline-block">
        <label for ="weapons">Weapons</label>
        <select name = "weapons" id="weapons">
            <option value="16">Knife</option>
            <option value="17">Candlestick</option>
            <option value="18">Revolver</option>
            <option value="19">Rope</option>
            <option value="20">Lead Pipe</option>
            <option value="21">Wrench</option>
        </select>
            </span>
        </br>
        <button type ="button" id="suggestionButton" disabled = "disabled">Make a suggestion!</button>
        <button type ="button" id="accusationButton" disabled = "disabled">Make an accusation!</button>
    </form>
    </div>



<!--Place holder Board image-->


<!--
    <form action="" class = "mbar">
        <input id="m" autocomplete="off" /><button>Send</button>
    </form> -->
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<script>
    var socket = io();
    $('form').submit(function(){
        socket.emit('message', $('#m').val());
        $('#m').val('');
        return false;
    });

    //Scrolling update status bar
    socket.on('message', function(msg){
        $('#messages').prepend($('<li>').text(msg));
    });

    //Disable the start button until 6 players have connected
    socket.on('gameReady', function(ready) {
        if(ready == false)
            $('#startGame').prop("disabled", true);
        else
            $('#startGame').prop("disabled", false);
    });

    //Dynamically create the update table with weapon locations
    socket.on('updateWeapons', function(weapons) {
        $('#weaponTable' ).empty();
        $('#weaponTable').append('<table></table>');
        var table = $('#weaponTable').children();
        table.append("<tr><td>Weapon</td><td>Location</td></tr>");
        for(var i =0; i<weapons.length; i++){
            var row = "<tr>";
            row+="<td>" + weapons[i].name + "</td>" +
                    "<td>" + weapons[i].location.name + "</td>";
            row+="</tr>";
            table.append(row);

        }
    });
    //Dynamically update characterTablw with character locations
    socket.on('updateCharacters', function(characters){
        $('#characterTable' ).empty();
        $('#characterTable').append('<table></table>');
        var table = $('#characterTable').children();
        table.append("<tr><td>Character</td><td>Location</td></tr>");
        for(var i =0; i<characters.length; i++){
            var row = "<tr>";
            row+="<td>" + characters[i].name + "</td>" +
                    "<td>" + characters[i].location.name + "</td>";
            row+="</tr>";
            table.append(row);

        }
    });

    //Append the list of Available players to the drop down menu
    socket.on('viewPlayers', function(player){
        $('#myCharacter').append($('<option>', {
            value:player[0],
            text:player[1]
        }));
    });

    //populate the players hand on the screen
    socket.on('deck', function(hand) {
        for (i = 0; i < hand.length; i++){
            $('#myHand').append($('<option>', {
                value:hand[i].name,
                text:hand[i].name
            }));

        }
    });
    //Code to make a suggestion/accusation
    socket.on('makeSuggestion', function(inRoom){
        {
            if(inRoom) {
                $('#suggestionButton').prop("disabled", false);
                $('#accusationButton').prop("disabled", false);
            } else
            {
                $('#suggestionButton').prop("disabled", true);
                $('#accusationButton').prop("disabled", true);
            }
        }
    });

    $('#suggestionButton').click(function(){
        var cards = [];
        weaponID = $('#weapons').val();
        characterID = $('#suspects').val();
        cards.push(weaponID);
        cards.push(characterID);
        $('#suggestionButton').prop("disabled", true);
        $('#accusationButton').prop("disabled", true);
        socket.emit('playerSuggestion',cards);
    });

    $('#accusationButton').click(function(){
        var cards = [];
        weaponID = $('#weapons').val();
        characterID = $('#suspects').val();
        cards.push(weaponID);
        cards.push(characterID);
        $('#suggestionButton').prop("disabled", true);
        $('#accusationButton').prop("disabled", true);
        socket.emit('playerAccusation',cards);
    });
    //Populating the moveTo menu
    socket.on('makeMove', function(rooms) {
        for(i = 0; i <rooms.length; i++) {
            $('#location').append($('<option>', {
                value: rooms[i].id,
                text: rooms[i].name
            }));
        }
        $('#moveButton').prop("disabled", false);
    });

    //send the id of the room to move the player to
    $('#moveButton').click(function() {
        socket.emit('movePlayer', $('#location').val());
        $('#location').empty();
        $('#moveButton').prop("disabled", true);

    });

    //Selecting a character functionality
    $('#join').click(function() {
        socket.emit('select-character',
                $('#myCharacter option:selected').text());
        $('#join').prop("disabled", true);
        $('#myCharacter').prop("disabled", true);

    });

    //Setting up the disprove button to broadcast their chosen card
    $('#disproveButton').click(function() {
        socket.emit('disprove', $('#myHand option:selected').text());
    });

    //TODO: implement startGame functionality
    $('#startGame').click(function() {
        socket.emit('startGame');
    })

</script>
<div class = "messages">
	<div style="text-align:center"><b>Server Messages</b></div>
    <ul id="messages"></ul>
</div>
</div>

</body>
</html>
